!function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(c)return c(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var c="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){$(function(){var t,n,r,o,c;return c=e("./sockets"),n=soma.template.create($("#bidPanel").get(0)),t=soma.template.create($("#askPanel").get(0)),o=soma.template.create($("#placeRate").get(0)),n.scope.timeFormat=function(e){return e.format("HH:mm")},n.scope.rates=[],n.render(),t.scope.timeFormat=function(e){return e.format("HH:mm")},t.scope.rates=[],t.render(),$("#placeBidLink, #placeBidLinkFirst, #placeBidLinkMenu").click(function(){return o.scope.rate="Bid",o.render(),$("#placeRate").modal("show")}),$("#placeAskLink, #placeAskLinkFirst, #placeAskLinkMenu").click(function(){return o.scope.rate="Ask",o.render(),$("#placeRate").modal("show")}),r=function(){return{currency:$("#rateCurrencySelector").val(),left:$("#rateAmountInput").val(),amount:$("#rateAmountInput").val(),part:$("#ratePartInput").val(),time:$("#rateTimePicker").data("DateTimePicker").date(),comment:$("#commentArea").val()}},$("#placeRateButton").click(function(){var e,i,a,u;return i="Bid"===o.scope.rate,u=i?n:t,a=r(),u.scope.rates.push(a),u.render(),e=i?"bids":"asks",c[e].emit("place",a),console.log(a),$("#placeRate").modal("hide"),$("#rateForm").trigger("reset"),$("#rateTimePicker").data("DateTimePicker").date(moment().add(4,"hour"))}),$("#rateTimePicker").datetimepicker({format:"HH:mm",stepping:10,minDate:moment().add(30,"minutes"),maxDate:moment().add(1,"day"),defaultDate:moment().add(4,"hour")})})},{"./sockets":4}],2:[function(e,t,n){var r,o,c=function(e,t){function n(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},i={}.hasOwnProperty;o=e("./channel"),r=function(e){function t(){t.__super__.constructor.call(this,"bids"),this.channel.on("place",function(e){return console.log("place",e)})}return c(t,e),t}(o),t.exports=r},{"./channel":3}],3:[function(e,t,n){var r;r=function(){function e(e){this.name=e,this.channel=io("localhost:9000/"+this.name,this.copts),this.channel.on("connecting",function(e){return function(){return e.registred++,e.channel.attempts=0,e.reload=setTimeout(function(){return e.showError(),setTimeout(function(){return window.location.reload()},5e3)},25e3)}}(this)),this.channel.on("connect",function(e){return function(){return clearTimeout(e.reload),e.registred--,e.registred?void 0:e.hideConnect()}}(this)),this.channel.on("connect_failed",function(e){return function(){return console.log("connect_failed"),e.showError()}}(this)),this.channel.on("reconnecting",function(e){return function(){return e.channel.attempts++,e.channel.attempts===e.copts["max reconnection attempts"]?e.showError():void 0}}(this)),this.channel.on("reconnect",function(e){return function(){return e.channel.attempts--,window.location.reload()}}(this)),this.channel.on("reconnect_failed",function(e){return function(){return console.log("reconnect_failed"),e.showError()}}(this)),this.channel.on("disconnect",function(e){return function(){return e.registred++,e.showConnect()}}(this)),this.channel.on("error",function(e){return function(){return e.showError()}}(this))}return e.prototype.copts={"connect timeout":5e3,"max reconnection attempts":4},e.prototype.registred=0,e.prototype.showConnect=function(){return console.log("connecting...")},e.prototype.hideConnect=function(){return console.log("connected")},e.prototype.showError=function(){return this.showConnect(),$("#connect_error").show()},e}(),t.exports=r},{}],4:[function(e,t,n){var r;r=e("./bids"),n.bids=(new r).channel},{"./bids":2}]},{},[1]);
//# sourceMappingURL=index.js.map